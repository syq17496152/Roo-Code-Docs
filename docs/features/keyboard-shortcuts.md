---
sidebar_label: 键盘导航
---

# 键盘导航

Roo Code界面支持键盘导航和快捷键，优化您的工作流并减少对鼠标交互的依赖。

---

## 可用键盘命令

Roo Code提供键盘命令来增强工作流。本页重点介绍`roo.acceptInput`命令，但以下快速参考涵盖所有键盘命令：

| 命令 | 描述 | 默认快捷键 |
|---------|-------------|-----------------|
| `roo.acceptInput` | 提交文本或接受主要建议 | 无（可配置） |
| `roo.focus` | 聚焦Roo输入框 | 无（可配置） |
| 箭头键（上/下） | 浏览提示历史 | 内置 |

### 键盘命令的核心优势

* **键盘驱动界面**：无需鼠标即可提交文本或选择主要建议按钮
* **提升可访问性**：对行动不便或使用鼠标不适的用户至关重要
* **Vim/Neovim兼容性**：支持从键盘为中心环境过渡的开发者
* **工作流效率**：减少开发任务中的键盘与鼠标切换

---

## roo.acceptInput命令

`roo.acceptInput`命令允许您使用键盘快捷键提交文本或接受建议，而非点击按钮或按输入框中的回车键。

### 功能说明

`roo.acceptInput`命令是一个通用输入提交命令。触发时会：

- 在文本输入区域提交当前文本或图片输入（等效于按回车键）
- 当显示操作按钮时（如确认/取消按钮），点击主要（第一个）按钮

### 详细设置指南

#### 方法1：使用VS Code界面

1. 打开命令面板（`Ctrl+Shift+P` 或 Mac上的`Cmd+Shift+P`）
2. 输入"Preferences: Open Keyboard Shortcuts"
3. 在搜索框中输入"roo.acceptInput"
4. 在结果中定位"Roo: 接受输入/建议"
5. 点击命令左侧的+图标
6. 按下您希望的组合键（如`Ctrl+Enter`或`Alt+Enter`）
7. 按回车确认

#### 方法2：直接编辑keybindings.json

1. 打开命令面板（`Ctrl+Shift+P` 或 Mac上的`Cmd+Shift+P`）
2. 输入"Preferences: Open Keyboard Shortcuts (JSON)"
3. 在JSON数组中添加以下条目：

```json
{
  "key": "ctrl+enter",  // 或您偏好的组合键
  "command": "roo.acceptInput",
  "when": "rooViewFocused"  // 确保仅在Roo聚焦时生效
}
```

更正后的JSON代码块：

```json
{
  "key": "ctrl+enter",
  "command": "roo.acceptInput",
  "when": "rooViewFocused"
}
```

```json
{
  "key": "ctrl+enter",
  "command": "roo.acceptInput",
  "when": "webviewViewFocus && webviewViewId == 'roo-cline.SidebarProvider'"
}
```

#### 推荐组合键

选择不与现有VS Code快捷键冲突的组合：

- `Alt+Enter` - 输入时易于操作
- `Ctrl+Space` - 自动补全用户熟悉
- `Ctrl+Enter` - 命令执行直观
- `Alt+A` - "Accept"的助记键

### 实用使用场景

#### 快速开发工作流

- **文本提交**：无需移开双手即可向Roo发送消息
- **操作确认**：接受保存文件、运行命令或应用差异等操作
- **多步骤流程**：快速通过需要确认或输入的步骤
- **连续任务**：以最小干扰串联多个任务

#### 键盘为中心开发

- **Vim/Neovim工作流**：保持从Vim/Neovim过渡的键盘聚焦工作流
- **IDE集成**：与其他VS Code快捷键无缝配合
- **代码审查**：审查代码时快速接受建议
- **文档编写**：生成文档时提交文本和接受格式建议

#### 可访问性场景

- **手部活动受限**：对难以使用鼠标用户至关重要
- **重复性劳损预防**：减少鼠标使用预防劳损
- **屏幕阅读器集成**：与屏幕阅读器配合使用
- **语音控制兼容性**：与语音控制软件配合

### 可访问性优势

`roo.acceptInput`命令设计考虑了可访问性：

- **减少鼠标依赖**：无需使用鼠标完成整个工作流
- **减轻身体负担**：帮助因鼠标使用不适的用户
- **替代输入法**：支持依赖键盘导航的行动不便用户
- **工作流优化**：对从Vim/Neovim等键盘环境过渡的用户特别有价值

### 键盘工作流示例

以下完整工作流示例展示如何有效使用Roo的键盘快捷键：

#### 开发工作流示例

1. 打开VS Code并导航到项目
2. 通过侧边栏打开Roo
3. 输入请求："为用户注册创建REST API端点"
4. Roo询问框架偏好时，使用`roo.acceptInput`快捷键选择第一个建议
5. 继续使用快捷键接受代码生成建议
6. Roo提供保存文件建议时再次使用快捷键确认
7. 使用VS Code内置快捷键导航创建的文件

#### 代码审查工作流

1. 选择要审查的代码并使用VS Code的"复制"命令
2. 询问Roo审查代码："审查此代码的安全问题"
3. Roo提出代码上下文澄清问题时，使用快捷键接受建议
4. Roo提供改进建议时再次使用快捷键接受实现建议

### 故障排除

| 问题 | 解决方案 |
|-------|----------|
| 快捷键无效 | 确保Roo已聚焦（先点击Roo面板） |
| 选择错误建议 | 命令始终选择第一个（主要）按钮；需要不同选项时使用鼠标 |
| 与现有快捷键冲突 | 在VS Code键盘设置中尝试其他组合键 |
| 使用时无视觉反馈 | 属正常现象 - 命令静默激活功能 |
| 快捷键不稳定 | 确保keybindings.json中的`when`子句配置正确 |

### 技术实现

`roo.acceptInput`命令实现如下：

- 在命令面板中注册为`roo.acceptInput`，显示标题为"Roo: 接受输入/建议"
- 触发时向活动的Roo网络视图发送"acceptInput"消息
- 网络视图根据当前UI状态确定操作：
  - 显示且启用操作按钮时点击主要按钮
  - 文本区域启用且包含文本/图片时发送消息
- 无默认键绑定 - 用户需配置自己的快捷键

---

## 类终端提示历史导航

使用箭头键以终端体验导航提示历史。此功能可轻松重用和优化先前提示，无论来自当前对话还是过往任务。

### 核心功能
- **上下箭头**：循环浏览先前提示。
- **上下文感知**：在对话和任务历史间切换。
- **输入保留**：记住您正在输入的内容。

### 重要性

**之前**：重用提示需要滚动、复制和粘贴。
- 繁琐缓慢
- 易丢失位置
- 中断工作流

**使用提示历史导航**：无需离开键盘即可快速访问过往提示。

### 实现原理

导航设计直观且适应当前上下文。

#### 活跃对话中
- **上箭头**：显示上一个发送的提示。持续按可回溯对话历史。
- **下箭头**：在对话历史中向前移动，最终返回正在输入的文本。

#### 新建对话时
- **上箭头**：显示当前工作区任务历史中最近的提示。
- **下箭头**：在任务历史中向前移动。

#### 边界情况
- 导航时开始输入会保留新文本。
- 仅当光标位于输入框第一行或最后一行时生效，避免干扰多行编辑。

### 配置

此功能默认启用，无需配置。

### 优势

- **提升效率**：无需鼠标重用提示。
- **增强上下文**：轻松访问和构建过往交互。
- **减少中断**：保持专注。

### 常见问题

**"按上箭头无反应？"**
- 可能处于多行提示中间。光标需位于第一行。
- 当前上下文可能无历史记录。

**"对话历史和任务历史有何区别？"**
- **对话历史**：包含当前活跃对话中的提示。
- **任务历史**：包含当前工作区所有过往任务的初始提示。