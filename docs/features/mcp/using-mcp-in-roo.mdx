---
title: 在 Roo Code 中使用 MCP
sidebar_label: 在 Roo Code 中使用 MCP
---

# 在 Roo Code 中使用 MCP

:::info 对 MCP 服务器感到困惑？

MCP（模型上下文协议）服务器充当桥梁，为 Roo Code 提供访问更广泛的**工具**和外部服务的权限，如数据库、API 或自定义脚本。它使用标准的通信方法，使 Roo 能够利用这些外部功能。

有关更深入的了解，请查看 [MCP 是什么？](/features/mcp/what-is-mcp)。
:::

模型上下文协议（MCP）通过连接外部工具和服务来扩展 Roo Code 的功能。本指南涵盖了您需要了解的有关在 Roo Code 中使用 MCP 的所有信息。

<div style={{ position: 'relative', paddingBottom: '56.25%', height: 0, overflow: 'hidden' }}>
  <iframe
    src="https://www.youtube.com/embed/QDy3dm1xJ6Y"
    style={{
      position: 'absolute',
      top: 0,
      left: 0,
      width: '100%',
      height: '100%',
    }}
    frameBorder="0"
    allow="autoplay; encrypted-media"
    allowFullScreen
  ></iframe>
</div>
<br />

// ... existing code ...

## 配置 MCP 服务器

MCP 服务器配置可以在两个级别进行管理：

1.  **全局配置**：存储在 `mcp_settings.json` 文件中，可通过 VS Code 设置访问（见下文）。这些设置适用于所有工作区，除非被项目级配置覆盖。
2.  **项目级配置**：在项目根目录下的 `.roo/mcp.json` 文件中定义。这允许您设置项目特定的服务器，并通过将文件提交到版本控制与团队共享配置。如果存在，Roo Code 会自动检测并加载此文件。

**优先级**：如果服务器名称同时存在于全局和项目配置中，**项目级配置优先**。

### 编辑 MCP 设置文件

您可以直接从 Roo Code MCP 设置视图中编辑全局和项目级 MCP 配置文件：

1. 点击 Roo Code 窗格顶部导航中的 <Codicon name="server" /> 图标。

  <img src="/img/using-mcp-in-roo/using-mcp-in-roo-10.png" alt="Roo Code 中的 MCP 服务器界面" width="400" />

2. 在 MCP 设置视图中向下滚动到底部。
3. 点击适当的按钮：
    *   **`编辑全局 MCP`**：打开全局 `mcp_settings.json` 文件。
    *   **`编辑项目 MCP`**：打开项目特定的 `.roo/mcp.json` 文件。如果此文件不存在，Roo Code 将为您创建它。

  <img src="/img/using-mcp-in-roo/using-mcp-in-roo-9.png" alt="编辑全局 MCP 和编辑项目 MCP 按钮" width="600" />

两个文件都使用 JSON 格式，包含一个 `mcpServers` 对象，其中包含命名的服务器配置：

  ```json
  {
    "mcpServers": {
      "server1": {
        "command": "python",
        "args": ["/path/to/server.py"],
        "env": {
          "API_KEY": "your_api_key"
        },
        "alwaysAllow": ["tool1", "tool2"],
        "disabled": false
      }
    }
  }
    ```
    *Roo Code 中 MCP 服务器配置示例（STDIO 传输）*

  // ... existing code ...

  ### 使用 MCP 工具
  
  // ... existing code ...
  
  ### 平台特定的 MCP 配置示例
  
  // ... existing code ...
  
  ### 运行时版本管理器配置
  
  // ... existing code ...
  