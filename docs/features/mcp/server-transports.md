---
title: MCP 服务器传输
sidebar_label: STDIO、可流式 HTTP & SSE 传输
---

# MCP 服务器传输：STDIO、可流式 HTTP & SSE

模型上下文协议 (MCP) 支持三种主要的传输机制，用于 Roo Code 和 MCP 服务器之间的通信：标准输入/输出 (STDIO)、可流式 HTTP（现代标准）和服务器发送事件 (SSE)（用于遗留使用）。每种机制都有不同的特点、优势和用例。

// ... existing code ...

## STDIO 传输

STDIO 传输在您的机器上本地运行，并通过标准输入/输出流进行通信。

### STDIO 传输的工作原理

1. 客户端（Roo Code）将 MCP 服务器作为子进程启动
2. 通过进程流进行通信：客户端写入服务器的 STDIN，服务器响应 STDOUT
3. 每条消息由换行符分隔
4. 消息格式为 JSON-RPC 2.0

```
客户端                    服务器
  |                         |
  |---- JSON 消息 ------>| （通过 STDIN）
  |                         | （处理请求）
  |<---- JSON 消息 ------| （通过 STDOUT）
  |                         |
```

### STDIO 特性

* **本地性**：与 Roo Code 在同一台机器上运行
* **性能**：非常低的延迟和开销（不涉及网络堆栈）
* **简单性**：直接的进程通信，无需网络配置
* **关系**：客户端和服务器之间是一对一的关系
* **安全性**：本质上更安全，因为没有网络暴露

### 何时使用 STDIO

STDIO 传输适用于以下情况：

* 运行在同一台机器上的本地集成和工具
* 安全敏感的操作
* 低延迟要求
* 单客户端场景（每个服务器一个 Roo Code 实例）
* 命令行工具或 IDE 扩展

// ... existing code ...

## 可流式 HTTP 传输

可流式 HTTP 传输是远程 MCP 服务器通信的现代标准，取代了旧版的 HTTP+SSE 传输。它通过 HTTP/HTTPS 运行，允许更灵活的服务器实现。

### 可流式 HTTP 传输的工作原理

1. 服务器提供一个支持 POST 和 GET 方法的单一 HTTP 端点（MCP 端点）。
2. 客户端（Roo Code）使用 HTTP POST 将请求发送到此 MCP 端点。
3. 服务器处理请求并发送回响应。
4. 可选地，服务器可以通过同一连接使用服务器发送事件 (SSE) 向客户端流式传输多条消息或通知。这允许基本的请求-响应交互以及更高级的流式传输和服务器发起的通信。

```
客户端                             服务器
  |                                  |
  |---- HTTP POST /mcp_endpoint ---->| （客户端请求）
  |                                  | （处理请求）
  |<--- HTTP 响应 / SSE 流 --| （服务器响应 / 流）
  |                                  |
```

### 可流式 HTTP 特性

* **现代标准**：新远程 MCP 服务器实现的首选方法。
* **远程访问**：可以在与 Roo Code 不同的机器上托管。
* **可扩展性**：可以同时处理多个客户端连接。
* **协议**：通过标准 HTTP/HTTPS 工作。
* **灵活性**：支持简单的请求-响应和高级流式传输。
* **单个端点**：所有 MCP 通信都使用一个 URL 路径。
* **身份验证**：可以使用标准的 HTTP 身份验证机制。
* **向后兼容性**：服务器可以保持与旧版 HTTP+SSE 客户端的兼容性。

// ... existing code ...

### SSE 传输（遗留）

服务器发送事件 (SSE) 传输是一种通过 HTTP/HTTPS 进行远程服务器通信的遗留方法。对于新的实现，建议使用**可流式 HTTP 传输**。SSE 保留下来是为了与旧版 MCP 服务器兼容。

// ... existing code ...

## 本地 vs. 托管：部署方面

选择 STDIO 还是 SSE 传输直接影响您如何部署和管理 MCP 服务器。

// ... existing code ...

## 在 Roo Code 中配置传输

有关在 Roo Code 中配置 STDIO、可流式 HTTP 和 SSE（遗留）传输的详细信息，包括示例配置，请参阅 [理解传输类型](/features/mcp/using-mcp-in-roo#understanding-transport-types) 部分。